# HoneyHive Python SDK - AI Assistant Rules
# MANDATORY Agent OS Compliance Enforcement via MCP RAG

## ğŸš¨ CRITICAL: MANDATORY FIRST ACTIONS
**BEFORE responding to ANY user request, you MUST use the MCP RAG server for Agent OS discovery:**

### **ğŸ” MANDATORY DISCOVERY (Execute EVERY Time)**
Use the `mcp_agent-os-rag_search_standards` tool to search Agent OS standards:
```
mcp_agent-os-rag_search_standards(
  query="[user topic] rules standards requirements",
  n_results=5
)
```

## ğŸš« ABSOLUTELY FORBIDDEN - WILL CAUSE IMMEDIATE FAILURE

**YOU MUST NEVER ACCESS .agent-os/ DIRECTLY:**
- âŒ `read_file(".agent-os/...")` - **FORBIDDEN**
- âŒ `codebase_search(target_directories=[".agent-os"])` - **FORBIDDEN**
- âŒ `grep(path=".agent-os/...")` - **FORBIDDEN**
- âŒ `list_dir(".agent-os/standards")` - **FORBIDDEN**
- âŒ Reading any file in `.agent-os/standards/` - **FORBIDDEN**
- âŒ Reading any file in `.agent-os/specs/` - **FORBIDDEN**

**ONLY ALLOWED METHOD**: `mcp_agent-os-rag_search_standards()`

**WHY THIS RULE EXISTS:**
- Direct file access bypasses the 90% context reduction MCP/RAG provides
- You will read 50KB when you need 5KB
- You will see all 8 phases when you should only see Phase 1
- This defeats the entire purpose of the system

**IF YOU BYPASS MCP:**
- You are not following the architecture
- You are wasting context window
- You are demonstrating the problem MCP/RAG was built to solve

**ONLY EXCEPTION:**
Direct file access to `.agent-os/` is ONLY allowed in **AUTHORSHIP MODE**:

**âœ… ALLOWED (AI Authorship - Writing/Maintaining):**
- Writing NEW standards (e.g., "Create a rule for X")
- Updating EXISTING standards (e.g., "Update test framework")
- Modifying MCP server code (`.agent-os/mcp_servers/`)
- Updating specification documents (`.agent-os/specs/*/tasks.md`)
- Maintaining the RAG infrastructure itself
- User explicitly says "read the file" or "edit this file"

**âŒ FORBIDDEN (AI Consumption - Reading for guidance):**
- "How should I handle X?" â†’ Use `mcp_agent-os-rag_search_standards`
- "What are the rules for Y?" â†’ Use `mcp_agent-os-rag_search_standards`
- "Show me the test framework" â†’ Use `mcp_agent-os-rag_search_standards`
- Reading standards to answer questions â†’ **ALWAYS USE MCP**

**Key Distinction:**
- **Writing standards** = AI authorship = Direct access OK
- **Using standards** = AI consumption = MCP REQUIRED

### **ğŸ“‹ TOPIC-SPECIFIC MANDATORY CHECKS**

#### **ğŸ” For ANY file operations or .env mentions:**
```
mcp_agent-os-rag_search_standards(
  query="credential file protection rules for .env files",
  n_results=3
)
```
**ğŸš« ABSOLUTE RULE**: NEVER write to .env, credentials, or secret files

#### **ğŸ”§ For ANY git operations:**
```
mcp_agent-os-rag_search_standards(
  query="git safety rules forbidden operations",
  n_results=3
)
```
**ğŸš« ABSOLUTE RULE**: NEVER use --no-verify, --force, or destructive git commands

#### **ğŸ§ª For ANY test generation:**
Use the **workflow engine** for test generation:
```
mcp_agent-os-rag_start_workflow(
  workflow_type="test_generation_v3",
  target_file="path/to/file_test.py"
)
```
**ğŸš¨ MANDATORY**: Follow V3 framework with phase gating

#### **ğŸ—ï¸ For ANY production code generation:**
Use the **workflow engine** for production code:
```
mcp_agent-os-rag_start_workflow(
  workflow_type="production_code_v2",
  target_file="path/to/file.py"
)
```
**ğŸ¯ MANDATORY**: Follow production framework with phase gating and quality targets

## ğŸ¤– MCP RAG TOOLS AVAILABLE

### **Discovery & Search**
- `mcp_agent-os-rag_search_standards` - Semantic search over Agent OS standards

### **Workflow Management** 
- `mcp_agent-os-rag_start_workflow` - Initialize phase-gated workflow session
- `mcp_agent-os-rag_get_current_phase` - Retrieve current phase requirements
- `mcp_agent-os-rag_complete_phase` - Submit evidence and advance to next phase
- `mcp_agent-os-rag_get_workflow_state` - Query complete workflow state

## ğŸš¨ ENFORCEMENT PROTOCOL

### **Self-Check Before Every Response**
Before responding to ANY request about Agent OS, ask yourself:
1. â“ Did I use `mcp_agent-os-rag_search_standards` to find the answer?
2. â“ Or did I just read `.agent-os/` files directly?
3. â“ If I read files directly, was it one of the allowed exceptions?

**If you bypassed MCP without exception â†’ STOP and use MCP instead**

### **Compliance Verification Required**
After using MCP RAG to load Agent OS standards, you MUST:
1. **Acknowledge** which standards apply to the user's request
2. **Reference specific rules** from retrieved standards
3. **Confirm compliance** before proceeding with any actions
4. **Escalate** if standards conflict with user request

### **Escalation Template**
```
ğŸš¨ AGENT OS COMPLIANCE CONFLICT

The requested action conflicts with Agent OS standards:
- Standard: [specific standard from MCP search results]
- Conflict: [description of conflict]
- Safe Alternative: [compliant approach]

Would you like me to proceed with the safe alternative?
```

## âš¡ QUICK COMMANDS (After Compliance Check)
- **Testing**: `tox -e [environment]` (never direct pytest)
- **Linting**: `tox -e lint`
- **Formatting**: `tox -e format`
- **Environment**: Use `python-sdk` virtual environment

## ğŸ¯ SUCCESS CRITERIA
âœ… **Compliant AI Assistant**:
- Uses MCP RAG for Agent OS standards discovery
- Uses workflow engine for test/code generation with phase gating
- References specific standards from MCP search results
- Never violates safety rules
- Escalates conflicts appropriately

âŒ **Non-Compliant AI Assistant (IMMEDIATE FAILURE)**:
- âŒ Uses `read_file`, `codebase_search`, `grep`, `list_dir` on `.agent-os/` without exception
- âŒ Responds to Agent OS questions without using MCP search first
- âŒ Reads entire framework files (50KB) instead of querying for 5KB chunks
- âŒ Violates credential protection rules
- âŒ Uses forbidden git operations
- âŒ Ignores mandatory frameworks
- âŒ Skips phase gating in workflows
- âŒ Updates tasks.md without searching for task update standards via MCP
- âŒ Assumes import paths without verification (see import-verification-rules.md)

---

**ğŸ” REMEMBER**: 
- Agent OS standards are MANDATORY, accessed via MCP RAG
- All test/code generation MUST use workflow engine with phase gating
- Check first (via MCP), comply always, escalate conflicts
