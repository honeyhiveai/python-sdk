version: '1.0'
provider: openai
dsl_type: provider_field_mappings
field_mappings:
  inputs: {}
  outputs:
    choices:
      source_rule: traceloop_choices
      required: true
      description: Array of completion choices
    index:
      source_rule: traceloop_choices_array_index
      required: true
      description: Index of the choice in the array
    role:
      source_rule: traceloop_choices_array_message_role
      required: true
      description: Role of the message author
    content:
      source_rule: traceloop_choices_array_message_content
      required: true
      description: Content of the message. Can be null when only tool_calls or refusal
        present
    tool_calls:
      source_rule: traceloop_choices_array_message_tool_calls
      required: true
      description: Tool calls generated by the model
    type:
      source_rule: traceloop_choices_array_message_tool_calls_array_type
      required: true
      description: Type of tool call (currently only 'function')
    name:
      source_rule: traceloop_choices_array_message_tool_calls_array_function_name
      required: true
      description: Name of the function to call
    arguments:
      source_rule: traceloop_choices_array_message_tool_calls_array_function_arguments
      required: true
      description: JSON-encoded function arguments (STRING, not object!)
    refusal:
      source_rule: traceloop_choices_array_message_refusal
      required: true
      description: Model's refusal message (if model refused the request)
    expires_at:
      source_rule: traceloop_choices_array_message_audio_expires_at
      required: true
      description: Unix timestamp when the audio expires
    data:
      source_rule: traceloop_choices_array_message_audio_data
      required: true
      description: Base64-encoded audio data
    transcript:
      source_rule: traceloop_choices_array_message_audio_transcript
      required: true
      description: Text transcript of the audio
    name_choices_message_name:
      source_rule: traceloop_choices_array_message_name
      required: true
      description: Optional name for the message participant
    logprobs:
      source_rule: traceloop_choices_array_logprobs
      required: true
      description: Log probability information (if requested)
    finish_reason:
      source_rule: traceloop_choices_array_finish_reason
      required: true
      description: Reason why the model stopped generating tokens
  config:
    model:
      source_rule: traceloop_model
      required: true
      description: The model used for the completion
  metadata:
    id:
      source_rule: traceloop_id
      required: true
      description: Unique identifier for the chat completion
    created:
      source_rule: traceloop_created
      required: true
      description: Unix timestamp (in seconds) of when the completion was created
    id_choices_message_tool_calls_id:
      source_rule: traceloop_choices_array_message_tool_calls_array_id
      required: true
      description: Unique identifier for the tool call
    id_choices_message_audio_id:
      source_rule: traceloop_choices_array_message_audio_id
      required: true
      description: Unique identifier for the audio
    usage:
      source_rule: traceloop_usage
      required: true
      description: Token usage information
    prompt_tokens:
      source_rule: traceloop_usage_prompt_tokens
      required: true
      description: Number of tokens in the prompt
    completion_tokens:
      source_rule: traceloop_usage_completion_tokens
      required: true
      description: Number of tokens in the completion
    total_tokens:
      source_rule: traceloop_usage_total_tokens
      required: true
      description: Total tokens used (prompt + completion)
    cached_tokens:
      source_rule: traceloop_usage_prompt_tokens_details_cached_tokens
      required: true
      description: Number of cached prompt tokens
    audio_tokens:
      source_rule: traceloop_usage_prompt_tokens_details_audio_tokens
      required: true
      description: Number of audio input tokens
    reasoning_tokens:
      source_rule: traceloop_usage_completion_tokens_details_reasoning_tokens
      required: true
      description: Number of reasoning tokens (for o1 models)
    audio_tokens_usage_completion_tokens_details_audio_tokens:
      source_rule: traceloop_usage_completion_tokens_details_audio_tokens
      required: true
      description: Number of audio output tokens
    system_fingerprint:
      source_rule: traceloop_system_fingerprint
      required: true
      description: System configuration fingerprint
    service_tier:
      source_rule: traceloop_service_tier
      required: true
      description: Service tier used for the request
