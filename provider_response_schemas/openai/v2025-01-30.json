{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "version": "2025-01-30",
  "provider": "openai",
  "last_verified": "2025-01-30",
  "api_version": "v1",
  "documentation_url": "https://platform.openai.com/docs/api-reference/chat/object",
  "schemas": {
    "ChatCompletionResponse": {
      "type": "object",
      "required": [
        "id",
        "object",
        "created",
        "model",
        "choices"
      ],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^chatcmpl-",
          "description": "Unique identifier for the chat completion",
          "example": "chatcmpl-123"
        },
        "object": {
          "type": "string",
          "enum": [
            "chat.completion"
          ],
          "description": "Object type, always 'chat.completion'"
        },
        "created": {
          "type": "integer",
          "description": "Unix timestamp (in seconds) of when the completion was created",
          "example": 1721596428
        },
        "model": {
          "type": "string",
          "description": "The model used for the completion",
          "example": "gpt-4o-2024-08-06"
        },
        "choices": {
          "type": "array",
          "items": {
            "$ref": "#/schemas/ChatCompletionChoice"
          },
          "description": "Array of completion choices"
        },
        "usage": {
          "$ref": "#/schemas/UsageInfo",
          "description": "Token usage information"
        },
        "system_fingerprint": {
          "type": "string",
          "description": "System configuration fingerprint",
          "example": "fp_3407719c7f"
        },
        "service_tier": {
          "type": "string",
          "description": "Service tier used for the request"
        }
      }
    },
    "ChatCompletionChoice": {
      "type": "object",
      "required": [
        "index",
        "message",
        "finish_reason"
      ],
      "properties": {
        "index": {
          "type": "integer",
          "description": "Index of the choice in the array",
          "example": 0
        },
        "message": {
          "$ref": "#/schemas/ChatCompletionMessage",
          "description": "Message generated by the model"
        },
        "logprobs": {
          "oneOf": [
            {
              "$ref": "#/schemas/LogprobsInfo"
            },
            {
              "type": "null"
            }
          ],
          "description": "Log probability information (if requested)"
        },
        "finish_reason": {
          "$ref": "#/schemas/FinishReason",
          "description": "Reason why the model stopped generating"
        }
      }
    },
    "ChatCompletionMessage": {
      "type": "object",
      "required": [
        "role"
      ],
      "properties": {
        "role": {
          "type": "string",
          "enum": [
            "assistant",
            "user",
            "system",
            "tool"
          ],
          "description": "Role of the message author"
        },
        "content": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "description": "Content of the message. Can be null when only tool_calls or refusal present",
          "nullSemantics": "Null indicates only tool_calls or refusal, no text content"
        },
        "tool_calls": {
          "type": "array",
          "items": {
            "$ref": "#/schemas/ToolCall"
          },
          "description": "Tool calls generated by the model"
        },
        "refusal": {
          "type": "string",
          "description": "Model's refusal message (if model refused the request)",
          "conditional": {
            "when": "Model declines request due to safety/policy",
            "note": "New field as of 2024-08-06"
          }
        },
        "audio": {
          "$ref": "#/schemas/AudioData",
          "description": "Audio output from the model (for audio-capable models)",
          "conditional": {
            "when": "Audio output is enabled",
            "note": "New field for audio-capable models"
          }
        },
        "name": {
          "type": "string",
          "description": "Optional name for the message participant"
        }
      }
    },
    "ToolCall": {
      "type": "object",
      "required": [
        "id",
        "type",
        "function"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the tool call",
          "pattern": "^call_",
          "example": "call_abc123"
        },
        "type": {
          "type": "string",
          "enum": [
            "function"
          ],
          "description": "Type of tool call (currently only 'function')"
        },
        "function": {
          "$ref": "#/schemas/FunctionCall",
          "description": "Function call details"
        }
      }
    },
    "FunctionCall": {
      "type": "object",
      "required": [
        "name",
        "arguments"
      ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the function to call",
          "example": "get_weather"
        },
        "arguments": {
          "type": "string",
          "format": "json-string",
          "description": "JSON-encoded function arguments (STRING, not object!)",
          "example": "{\"location\": \"San Francisco\", \"unit\": \"celsius\"}",
          "jsonSchema": {
            "type": "object",
            "description": "Schema of the parsed arguments depends on function definition"
          },
          "notes": "CRITICAL: This is a JSON STRING, must be parsed to get actual arguments object"
        }
      }
    },
    "AudioData": {
      "type": "object",
      "required": [
        "id",
        "expires_at",
        "data",
        "transcript"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the audio",
          "example": "audio_abc123"
        },
        "expires_at": {
          "type": "integer",
          "description": "Unix timestamp when the audio expires",
          "example": 1721600000
        },
        "data": {
          "type": "string",
          "format": "base64",
          "contentType": "audio/wav",
          "description": "Base64-encoded audio data"
        },
        "transcript": {
          "type": "string",
          "description": "Text transcript of the audio",
          "example": "Hello, I'm speaking to you."
        }
      }
    },
    "UsageInfo": {
      "type": "object",
      "required": [
        "prompt_tokens",
        "completion_tokens",
        "total_tokens"
      ],
      "properties": {
        "prompt_tokens": {
          "type": "integer",
          "description": "Number of tokens in the prompt",
          "example": 56
        },
        "completion_tokens": {
          "type": "integer",
          "description": "Number of tokens in the completion",
          "example": 31
        },
        "total_tokens": {
          "type": "integer",
          "description": "Total tokens used (prompt + completion)",
          "example": 87
        },
        "prompt_tokens_details": {
          "$ref": "#/schemas/PromptTokensDetails",
          "description": "Breakdown of prompt tokens"
        },
        "completion_tokens_details": {
          "$ref": "#/schemas/CompletionTokensDetails",
          "description": "Breakdown of completion tokens"
        }
      }
    },
    "PromptTokensDetails": {
      "type": "object",
      "properties": {
        "cached_tokens": {
          "type": "integer",
          "description": "Number of cached prompt tokens",
          "example": 20
        },
        "audio_tokens": {
          "type": "integer",
          "description": "Number of audio input tokens"
        }
      }
    },
    "CompletionTokensDetails": {
      "type": "object",
      "properties": {
        "reasoning_tokens": {
          "type": "integer",
          "description": "Number of reasoning tokens (for o1 models)",
          "example": 10,
          "conditional": {
            "when": "Using o1-preview or o1-mini models",
            "note": "New field for reasoning models"
          }
        },
        "audio_tokens": {
          "type": "integer",
          "description": "Number of audio output tokens"
        }
      }
    },
    "FinishReason": {
      "type": "string",
      "enum": [
        "stop",
        "length",
        "tool_calls",
        "content_filter",
        "function_call"
      ],
      "description": "Reason why the model stopped generating tokens",
      "enumDescriptions": {
        "stop": "Natural completion point reached",
        "length": "Maximum token limit reached",
        "tool_calls": "Model wants to call a tool/function",
        "content_filter": "Content filtered by safety system",
        "function_call": "Legacy function calling (deprecated, use tool_calls)"
      }
    },
    "LogprobsInfo": {
      "type": "object",
      "description": "Log probability information for tokens",
      "properties": {
        "content": {
          "type": "array",
          "items": {
            "$ref": "#/schemas/TokenLogprobs"
          }
        }
      }
    },
    "TokenLogprobs": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        },
        "logprob": {
          "type": "number"
        },
        "bytes": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "top_logprobs": {
          "type": "array",
          "items": {
            "$ref": "#/schemas/TopLogprob"
          }
        }
      }
    },
    "TopLogprob": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        },
        "logprob": {
          "type": "number"
        },
        "bytes": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        }
      }
    },
    "ErrorResponse": {
      "type": "object",
      "required": [
        "error"
      ],
      "properties": {
        "error": {
          "$ref": "#/schemas/Error",
          "description": "Error details"
        }
      }
    },
    "Error": {
      "type": "object",
      "required": [
        "message",
        "type"
      ],
      "properties": {
        "message": {
          "type": "string",
          "description": "Human-readable error message",
          "example": "Invalid API key provided"
        },
        "type": {
          "type": "string",
          "description": "Error type",
          "example": "invalid_request_error",
          "enum": [
            "invalid_request_error",
            "authentication_error",
            "permission_error",
            "not_found_error",
            "rate_limit_error",
            "api_error",
            "service_unavailable"
          ]
        },
        "param": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "description": "Parameter that caused the error"
        },
        "code": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "description": "Error code",
          "example": "invalid_api_key"
        }
      }
    }
  },
  "metadata": {
    "models": [
      "gpt-5",
      "gpt-5-codex",
      "gpt-4o",
      "gpt-4o-mini",
      "gpt-4-turbo",
      "gpt-4",
      "gpt-3.5-turbo",
      "o1-preview",
      "o1-mini"
    ],
    "endpoints": [
      "/v1/chat/completions"
    ],
    "notes": "Schema covers chat completions API. Tool calls have JSON string arguments that must be parsed. Refusal and audio fields are new as of 2024-08-06."
  },
  "openapi_spec_verification": {
    "spec_url": "https://app.stainless.com/api/spec/documented/openai/openapi.documented.yml",
    "spec_version": "2.3.0",
    "verified_date": "2025-09-30",
    "verified_by": "Framework v1.0",
    "verification_method": "OpenAPI spec extraction and comparison",
    "all_fields_validated": true
  }
}
